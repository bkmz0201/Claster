{"version":3,"file":"tools.js","sourceRoot":"","sources":["../../src/targets/tools.ts"],"names":[],"mappings":";;AAGA,8CAEC;AAED,gCAoCC;AA3CD,6BAA4B;AAC5B,gDAA8C;AAE9C,SAAgB,iBAAiB;IAC/B,OAAO,IAAA,2BAAa,EAAC,yBAAyB,EAAE,4BAA4B,EAAE,0FAA0F,CAAC,CAAA;AAC3K,CAAC;AAEM,KAAK,UAAU,UAAU;IAC9B,yGAAyG;IACzG,MAAM,cAAc,GAAG;QACrB,uCAAuC,EAAE,0FAA0F;QACnI,wCAAwC,EAAE,0FAA0F;QACpI,sCAAsC,EAAE,0FAA0F;QAClI,wCAAwC,EAAE,0FAA0F;QACpI,qCAAqC,EAAE,0FAA0F;KAClI,CAAA;IAED,IAAI,OAAO,CAAC,GAAG,CAAC,eAAe,IAAI,IAAI,EAAE,CAAC;QACxC,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,eAAe,CAAC,CAAA;IAClD,CAAC;IACD,MAAM,IAAI,GAAG,KAAK,CAAA;IAClB,IAAI,OAAO,CAAC,QAAQ,KAAK,OAAO,IAAI,OAAO,CAAC,GAAG,CAAC,cAAc,KAAK,MAAM,EAAE,CAAC;QAC1E,OAAO,IAAI,CAAA;IACb,CAAC;IACD,MAAM,MAAM,GAAG,GAAG,EAAE;QAClB,IAAI,OAAO,CAAC,QAAQ,KAAK,OAAO,EAAE,CAAC;YACjC,IAAI,OAAO,CAAC,IAAI,IAAI,KAAK,EAAE,CAAC;gBAC1B,OAAO,sCAAsC,CAAA;YAC/C,CAAC;iBAAM,IAAI,OAAO,CAAC,IAAI,KAAK,OAAO,EAAE,CAAC;gBACpC,OAAO,wCAAwC,CAAA;YACjD,CAAC;YACD,OAAO,qCAAqC,CAAA;QAC9C,CAAC;QACD,eAAe;QACf,IAAI,OAAO,CAAC,IAAI,KAAK,OAAO,EAAE,CAAC;YAC7B,OAAO,uCAAuC,CAAA;QAChD,CAAC;QACD,OAAO,wCAAwC,CAAA;IACjD,CAAC,CAAA;IAED,MAAM,QAAQ,GAAG,MAAM,EAAE,CAAA;IACzB,MAAM,OAAO,GAAG,MAAM,IAAA,2BAAa,EAAC,WAAW,EAAE,QAAQ,EAAE,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAA;IACpF,OAAO,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAA;AACjC,CAAC","sourcesContent":["import * as path from \"path\"\nimport { getBinFromUrl } from \"../binDownload\"\n\nexport function getLinuxToolsPath() {\n  return getBinFromUrl(\"linux-tools-mac-10.12.3\", \"linux-tools-mac-10.12.3.7z\", \"SQ8fqIRVXuQVWnVgaMTDWyf2TLAJjJYw3tRSqQJECmgF6qdM7Kogfa6KD49RbGzzMYIFca9Uw3MdsxzOPRWcYw==\")\n}\n\nexport async function getFpmPath() {\n  // It's just easier to copy the map of checksums here rather then adding them to within each if-statement\n  const fpmChecksumMap = {\n    \"fpm-1.16.0-ruby-3.4.3-darwin-arm64.7z\": \"xAyOUp213DnD5zN3o53L2sRs+OgoMYRVy2tOIhgsUdxcJUMzfy6U5Nrd92ZXUn5AHW3Y87CXPqwsL0aQaBTnBg==\",\n    \"fpm-1.16.0-ruby-3.4.3-darwin-x86_64.7z\": \"WWdGdSOemjuQateF0qWkiWF9sgLgm8NNDnnWJe9CQ7l9+tVw1/tAGKH32/kTeaANVaDZg1r2Jq0uxudGEPYOuw==\",\n    \"fpm-1.16.0-ruby-3.4.3-linux-amd64.7z\": \"zN/lxd0tUJi/QmjOmUQt91OaJbO+cSGxYmse7xh4BVXE4MY5TgUHUR+TqmEgBDofHqtR7G2V0OenYlr25ZWY2A==\",\n    \"fpm-1.16.0-ruby-3.4.3-linux-arm64v8.7z\": \"WfC0mi3PI9DYwXZdkg2gwFttHGJn8uAZlNVWs0xYMkGNTpEunP25hdBltg0YXrVdVWEQhpjCU3if5F03B8jfcw==\",\n    \"fpm-1.16.0-ruby-3.4.3-linux-i386.7z\": \"0qkId/DmyKc7fOQQN5pTe2gB+CfsJArmRGH+1f4KmFrNbfXQRl2G0c5NNEjSiqjqu+WhpOaKVWpHAskLD5iSzA==\",\n  }\n\n  if (process.env.CUSTOM_FPM_PATH != null) {\n    return path.resolve(process.env.CUSTOM_FPM_PATH)\n  }\n  const exec = \"fpm\"\n  if (process.platform === \"win32\" || process.env.USE_SYSTEM_FPM === \"true\") {\n    return exec\n  }\n  const getKey = () => {\n    if (process.platform === \"linux\") {\n      if (process.arch == \"x64\") {\n        return \"fpm-1.16.0-ruby-3.4.3-linux-amd64.7z\"\n      } else if (process.arch === \"arm64\") {\n        return \"fpm-1.16.0-ruby-3.4.3-linux-arm64v8.7z\"\n      }\n      return \"fpm-1.16.0-ruby-3.4.3-linux-i386.7z\"\n    }\n    // darwin arm64\n    if (process.arch === \"arm64\") {\n      return \"fpm-1.16.0-ruby-3.4.3-darwin-arm64.7z\"\n    }\n    return \"fpm-1.16.0-ruby-3.4.3-darwin-x86_64.7z\"\n  }\n\n  const filename = getKey()\n  const fpmPath = await getBinFromUrl(\"fpm@2.0.1\", filename, fpmChecksumMap[filename])\n  return path.join(fpmPath, exec)\n}\n"]}