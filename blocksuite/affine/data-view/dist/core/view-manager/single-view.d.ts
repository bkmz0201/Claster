import type { InsertToPosition } from '@blocksuite/affine-shared/utils';
import type { GeneralServiceIdentifier } from '@blocksuite/global/di';
import { type ReadonlySignal } from '@preact/signals-core';
import type { Variable } from '../expression/types.js';
import type { PropertyMetaConfig } from '../property/property-config.js';
import type { TraitKey } from '../traits/key.js';
import type { DatabaseFlags } from '../types.js';
import type { DataViewDataType, ViewMeta } from '../view/data-view.js';
import { type Cell } from './cell.js';
import type { Property } from './property.js';
import { type Row } from './row.js';
import type { ViewManager } from './view-manager.js';
export type MainProperties = {
    titleColumn?: string;
    iconColumn?: string;
    imageColumn?: string;
};
export interface SingleView {
    data$: any;
    readonly id: string;
    readonly type: string;
    readonly manager: ViewManager;
    readonly meta: ViewMeta;
    readonly readonly$: ReadonlySignal<boolean>;
    delete(): void;
    duplicate(): void;
    readonly name$: ReadonlySignal<string>;
    nameSet(name: string): void;
    readonly propertiesRaw$: ReadonlySignal<Property[]>;
    readonly propertyMap$: ReadonlySignal<Record<string, Property>>;
    readonly properties$: ReadonlySignal<Property[]>;
    readonly propertyIds$: ReadonlySignal<string[]>;
    readonly detailProperties$: ReadonlySignal<Property[]>;
    readonly rowsRaw$: ReadonlySignal<Row[]>;
    readonly rows$: ReadonlySignal<Row[]>;
    readonly rowIds$: ReadonlySignal<string[]>;
    readonly vars$: ReadonlySignal<Variable[]>;
    readonly featureFlags$: ReadonlySignal<DatabaseFlags>;
    propertyGetOrCreate(propertyId: string): Property;
    rowGetOrCreate(rowId: string): Row;
    cellGetOrCreate(rowId: string, propertyId: string): Cell;
    rowAdd(insertPosition: InsertToPosition): string;
    rowsDelete(rows: string[]): void;
    readonly propertyMetas$: ReadonlySignal<PropertyMetaConfig[]>;
    propertyAdd(toAfterOfProperty: InsertToPosition, ops?: {
        type?: string;
        name?: string;
    }): string | undefined;
    serviceGet<T>(key: GeneralServiceIdentifier<T>): T | null;
    serviceGetOrCreate<T>(key: GeneralServiceIdentifier<T>, create: () => T): T;
    traitGet<T>(key: TraitKey<T>): T | undefined;
    mainProperties$: ReadonlySignal<MainProperties>;
    lockRows(lock: boolean): void;
    isLocked$: ReadonlySignal<boolean>;
}
export declare abstract class SingleViewBase<ViewData extends DataViewDataType = DataViewDataType> implements SingleView {
    manager: ViewManager;
    id: string;
    private readonly searchString;
    private readonly traitMap;
    data$: ReadonlySignal<ViewData | undefined>;
    abstract detailProperties$: ReadonlySignal<Property[]>;
    protected lockRows$: import("@preact/signals-core").Signal<boolean>;
    isLocked$: ReadonlySignal<boolean>;
    abstract mainProperties$: ReadonlySignal<MainProperties>;
    name$: ReadonlySignal<string>;
    propertyIds$: ReadonlySignal<string[]>;
    propertyMap$: ReadonlySignal<Record<string, Property>>;
    abstract properties$: ReadonlySignal<Property[]>;
    abstract propertiesRaw$: ReadonlySignal<Property[]>;
    abstract readonly$: ReadonlySignal<boolean>;
    rowsRaw$: ReadonlySignal<Row[]>;
    rows$: ReadonlySignal<Row[]>;
    rowsDelete(rows: string[]): void;
    rowIds$: ReadonlySignal<string[]>;
    vars$: ReadonlySignal<{
        id: string;
        name: string;
        type: import("../index.js").TypeInstance;
        icon: import("@blocksuite/affine-shared/types").UniComponent | undefined;
        propertyType: string;
    }[]>;
    protected get dataSource(): import("../index.js").DataSource;
    get featureFlags$(): ReadonlySignal<DatabaseFlags>;
    get isLocked(): boolean;
    get meta(): ViewMeta;
    get propertyMetas$(): ReadonlySignal<PropertyMetaConfig[]>;
    abstract get type(): string;
    constructor(manager: ViewManager, id: string);
    private searchRowsMapping;
    cellGetOrCreate(rowId: string, propertyId: string): Cell;
    serviceGet<T>(key: GeneralServiceIdentifier<T>): T | null;
    serviceGetOrCreate<T>(key: GeneralServiceIdentifier<T>, create: () => T): T;
    dataUpdate(updater: (viewData: ViewData) => Partial<ViewData>): void;
    delete(): void;
    duplicate(): void;
    abstract isShow(rowId: string): boolean;
    lockRows(lock: boolean): void;
    nameSet(name: string): void;
    propertyAdd(position: InsertToPosition, ops?: {
        type?: string;
        name?: string;
    }): string | undefined;
    abstract propertyGetOrCreate(propertyId: string): Property;
    rowAdd(insertPosition: InsertToPosition | number): string;
    rowGetOrCreate(rowId: string): Row;
    protected rowsMapping(rows: Row[]): Row[];
    setSearch(str: string): void;
    traitGet<T>(key: TraitKey<T>): T | undefined;
    protected traitSet<T>(key: TraitKey<T>, value: T): T;
}
//# sourceMappingURL=single-view.d.ts.map