{"version":3,"file":"metric.js","sources":["../src/src/renderer/metric.ts"],"sourcesContent":["import {\n  _INTERNAL_captureMetric,\n  getClient,\n  getCurrentScope,\n  MetricOptions,\n  MetricType,\n  SerializedMetric,\n} from '@sentry/core';\nimport { getIPC } from './ipc.js';\n\nfunction captureMetric(type: MetricType, name: string, value: number, options?: MetricOptions): void {\n  const client = getClient();\n  _INTERNAL_captureMetric(\n    { type, name, value, unit: options?.unit, attributes: options?.attributes },\n    {\n      scope: options?.scope ?? getCurrentScope(),\n      captureSerializedMetric: (_: unknown, metric: SerializedMetric) => getIPC(client).sendMetric(metric),\n    },\n  );\n}\n\n/**\n * @summary Increment a counter metric. Requires the `_experiments.enableMetrics` option to be enabled.\n *\n * @param name - The name of the counter metric.\n * @param value - The value to increment by (defaults to 1).\n * @param options - Options for capturing the metric.\n *\n * @example\n *\n * ```\n * Sentry.metrics.count('api.requests', 1, {\n *   attributes: {\n *     endpoint: '/api/users',\n *     method: 'GET',\n *     status: 200\n *   }\n * });\n * ```\n *\n * @example With custom value\n *\n * ```\n * Sentry.metrics.count('items.processed', 5, {\n *   attributes: {\n *     processor: 'batch-processor',\n *     queue: 'high-priority'\n *   }\n * });\n * ```\n */\nexport function count(name: string, value: number = 1, options?: MetricOptions): void {\n  captureMetric('counter', name, value, options);\n}\n\n/**\n * @summary Set a gauge metric to a specific value. Requires the `_experiments.enableMetrics` option to be enabled.\n *\n * @param name - The name of the gauge metric.\n * @param value - The current value of the gauge.\n * @param options - Options for capturing the metric.\n *\n * @example\n *\n * ```\n * Sentry.metrics.gauge('memory.usage', 1024, {\n *   unit: 'megabyte',\n *   attributes: {\n *     process: 'web-server',\n *     region: 'us-east-1'\n *   }\n * });\n * ```\n *\n * @example Without unit\n *\n * ```\n * Sentry.metrics.gauge('active.connections', 42, {\n *   attributes: {\n *     server: 'api-1',\n *     protocol: 'websocket'\n *   }\n * });\n * ```\n */\nexport function gauge(name: string, value: number, options?: MetricOptions): void {\n  captureMetric('gauge', name, value, options);\n}\n\n/**\n * @summary Record a value in a distribution metric. Requires the `_experiments.enableMetrics` option to be enabled.\n *\n * @param name - The name of the distribution metric.\n * @param value - The value to record in the distribution.\n * @param options - Options for capturing the metric.\n *\n * @example\n *\n * ```\n * Sentry.metrics.distribution('task.duration', 500, {\n *   unit: 'millisecond',\n *   attributes: {\n *     task: 'data-processing',\n *     priority: 'high'\n *   }\n * });\n * ```\n *\n * @example Without unit\n *\n * ```\n * Sentry.metrics.distribution('batch.size', 100, {\n *   attributes: {\n *     processor: 'batch-1',\n *     type: 'async'\n *   }\n * });\n * ```\n */\nexport function distribution(name: string, value: number, options?: MetricOptions): void {\n  captureMetric('distribution', name, value, options);\n}\n"],"names":["getClient","_INTERNAL_captureMetric","getCurrentScope","getIPC"],"mappings":";;;AAUA,SAAS,aAAa,CAAC,IAAgB,EAAE,IAAY,EAAE,KAAa,EAAE,OAAuB,EAAA;AAC3F,IAAA,MAAM,MAAM,GAAGA,cAAS,EAAE;IAC1BC,4BAAuB,CACrB,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,EAAE,OAAO,EAAE,UAAU,EAAE,EAC3E;AACE,QAAA,KAAK,EAAE,OAAO,EAAE,KAAK,IAAIC,oBAAe,EAAE;AAC1C,QAAA,uBAAuB,EAAE,CAAC,CAAU,EAAE,MAAwB,KAAKC,UAAM,CAAC,MAAM,CAAC,CAAC,UAAU,CAAC,MAAM,CAAC;AACrG,KAAA,CACF;AACH;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BG;AACG,SAAU,KAAK,CAAC,IAAY,EAAE,KAAA,GAAgB,CAAC,EAAE,OAAuB,EAAA;IAC5E,aAAa,CAAC,SAAS,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,CAAC;AAChD;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BG;SACa,KAAK,CAAC,IAAY,EAAE,KAAa,EAAE,OAAuB,EAAA;IACxE,aAAa,CAAC,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,CAAC;AAC9C;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BG;SACa,YAAY,CAAC,IAAY,EAAE,KAAa,EAAE,OAAuB,EAAA;IAC/E,aAAa,CAAC,cAAc,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,CAAC;AACrD;;;;;;"}